/* ===== BUTTON V2 + ANIMATION SYSTEM INTEGRADO ===== */
/* Button.css - Sistema de Diseño V2 con Micro-interactions Automáticas */

/* ===== ANIMATION CSS VARIABLES ===== */
:root {
  /* Duraciones optimizadas */
  --animation-instant: 0ms;
  --animation-fast: 150ms;
  --animation-normal: 250ms;
  --animation-slow: 350ms;
  
  /* Easing curves profesionales */
  --easing-natural: cubic-bezier(0, 0, 0.2, 1);
  --easing-hover: cubic-bezier(0.25, 0.46, 0.45, 0.94);
  --easing-focus: cubic-bezier(0.16, 1, 0.3, 1);
  
  /* Animation presets automáticos */
  --animation-button-hover: all var(--animation-fast) var(--easing-hover);
  --animation-button-focus: box-shadow var(--animation-normal) var(--easing-focus);
  --animation-button-active: transform var(--animation-instant) var(--easing-natural);
}

/* ===== BUTTON BASE - CON MICRO-INTERACTIONS AUTOMÁTICAS ===== */
.btn {
  /* Layout */
  display: inline-flex;
  align-items: center;
  justify-content: center;
  position: relative;
  box-sizing: border-box;
  
  /* Typography */
  font-family: var(--font-family-base);
  font-weight: var(--font-weight-medium);
  text-decoration: none;
  line-height: 1;
  white-space: nowrap;
  user-select: none;
  
  /* Interacción */
  cursor: pointer;
  border: 1px solid transparent;
  outline: none;
  
  /* ✅ ANIMATION SYSTEM: Micro-interactions automáticas */
  transition: var(--animation-button-hover);
  will-change: transform, box-shadow, background-color, border-color;
  backface-visibility: hidden;
  
  /* Estados base */
  opacity: 1;
  transform: translateZ(0); /* Fuerza hardware acceleration */
}

/* ===== TAMAÑOS (COMPONENT_SIZES) ===== */
.btn--xs {
  height: 3.2rem;
  padding: 0.6rem 1.2rem;
  font-size: 1.3rem;
  min-width: 6.4rem;
}

.btn--sm {
  height: 4.0rem;
  padding: 0.8rem 1.6rem;
  font-size: 1.5rem;
  min-width: 8.0rem;
}

.btn--md {
  height: 4.8rem;
  padding: 1.2rem 2.0rem;
  font-size: 1.7rem;
  min-width: 9.6rem;
}

.btn--lg {
  height: 5.6rem;
  padding: 1.4rem 2.4rem;
  font-size: 1.9rem;
  min-width: 11.2rem;
}

.btn--xl {
  height: 6.4rem;
  padding: 1.6rem 3.2rem;
  font-size: 2.1rem;
  min-width: 12.8rem;
}

/* ===== VARIANTES SEMÁNTICAS ===== */

/* Primary - Acción principal */
.btn--primary {
  background-color: var(--color-primary);
  color: var(--text-on-primary);
  border-color: var(--color-primary);
  box-shadow: var(--shadow-sm);
}

.btn--primary:hover:not(:disabled) {
  background-color: var(--color-primary-hover);
  border-color: var(--color-primary-hover);
  box-shadow: var(--shadow-md);
  transform: translateY(-1px);
}

.btn--primary:focus:not(:disabled) {
  transition: var(--animation-button-focus);
  box-shadow: 0 0 0 3px rgba(var(--color-primary-rgb), 0.2), var(--shadow-md);
}

.btn--primary:active:not(:disabled) {
  transform: translateY(0);
  transition: var(--animation-button-active);
  box-shadow: var(--shadow-sm);
}

/* Secondary - Acción secundaria */
.btn--secondary {
  background-color: var(--color-secondary);
  color: var(--text-on-secondary);
  border-color: var(--color-secondary);
  box-shadow: var(--shadow-xs);
}

.btn--secondary:hover:not(:disabled) {
  background-color: var(--color-secondary-hover);
  border-color: var(--color-secondary-hover);
  box-shadow: var(--shadow-sm);
  transform: translateY(-1px);
}

.btn--secondary:focus:not(:disabled) {
  transition: var(--animation-button-focus);
  box-shadow: 0 0 0 3px rgba(var(--color-secondary-rgb), 0.2), var(--shadow-sm);
}

.btn--secondary:active:not(:disabled) {
  transform: translateY(0);
  box-shadow: var(--shadow-xs);
}

/* Success - Confirmación */
.btn--success {
  background-color: var(--color-success);
  color: var(--text-on-success);
  border-color: var(--color-success);
  box-shadow: var(--shadow-sm);
}

.btn--success:hover:not(:disabled) {
  background-color: var(--color-success-hover);
  border-color: var(--color-success-hover);
  box-shadow: var(--shadow-md);
  transform: translateY(-1px);
}

.btn--success:focus:not(:disabled) {
  box-shadow: 0 0 0 3px rgba(var(--color-success-rgb), 0.2), var(--shadow-md);
}

.btn--success:active:not(:disabled) {
  transform: translateY(0);
  box-shadow: var(--shadow-sm);
}

/* Warning - Advertencia */
.btn--warning {
  background-color: var(--color-warning);
  color: var(--text-on-warning);
  border-color: var(--color-warning);
  box-shadow: var(--shadow-sm);
}

.btn--warning:hover:not(:disabled) {
  background-color: var(--color-warning-hover);
  border-color: var(--color-warning-hover);
  box-shadow: var(--shadow-md);
  transform: translateY(-1px);
}

.btn--warning:focus:not(:disabled) {
  box-shadow: 0 0 0 3px rgba(var(--color-warning-rgb), 0.2), var(--shadow-md);
}

.btn--warning:active:not(:disabled) {
  transform: translateY(0);
  box-shadow: var(--shadow-sm);
}

/* Danger - Acción destructiva */
.btn--danger {
  background-color: var(--color-danger);
  color: var(--text-on-danger);
  border-color: var(--color-danger);
  box-shadow: var(--shadow-sm);
}

.btn--danger:hover:not(:disabled) {
  background-color: var(--color-danger-hover);
  border-color: var(--color-danger-hover);
  box-shadow: var(--shadow-md);
  transform: translateY(-1px);
}

.btn--danger:focus:not(:disabled) {
  box-shadow: 0 0 0 3px rgba(var(--color-danger-rgb), 0.2), var(--shadow-md);
}

.btn--danger:active:not(:disabled) {
  transform: translateY(0);
  box-shadow: var(--shadow-sm);
}

/* Neutral - Acción neutral */
.btn--neutral {
  background-color: var(--bg-secondary);
  color: var(--text-primary);
  border-color: var(--border-default);
  box-shadow: var(--shadow-xs);
}

.btn--neutral:hover:not(:disabled) {
  background-color: var(--bg-tertiary);
  border-color: var(--border-hover);
  box-shadow: var(--shadow-sm);
  transform: translateY(-1px);
}

.btn--neutral:focus:not(:disabled) {
  box-shadow: 0 0 0 3px var(--bg-hover), var(--shadow-sm);
}

.btn--neutral:active:not(:disabled) {
  transform: translateY(0);
  background-color: var(--bg-muted);
  box-shadow: var(--shadow-xs);
}

/* ===== BORDER RADIUS ===== */
.btn--rounded-none { border-radius: 0; }
.btn--rounded-xs { border-radius: 0.2rem; }
.btn--rounded-sm { border-radius: 0.4rem; }
.btn--rounded-md { border-radius: 0.8rem; } /* DEFAULT */
.btn--rounded-lg { border-radius: 1.2rem; }
.btn--rounded-xl { border-radius: 1.6rem; }
.btn--rounded-2xl { border-radius: 2.4rem; }
.btn--rounded-3xl { border-radius: 3.2rem; }
.btn--rounded-full { border-radius: 9999px; }

/* ===== ANCHO ===== */
.btn--full-width {
  width: 100%;
  display: flex;
}

/* ===== ESTADOS ESPECIALES ===== */

/* Disabled */
.btn--disabled,
.btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  pointer-events: none;
  transform: none !important;
  box-shadow: none !important;
}

/* Loading */
.btn--loading {
  color: transparent !important;
  cursor: wait;
  pointer-events: none;
}

.btn--loading .btn__content {
  opacity: 0;
}

/* Icon Only */
.btn--icon-only {
  width: auto;
  min-width: auto;
  aspect-ratio: 1;
  padding: 0;
}

.btn--icon-only.btn--xs { width: 3.2rem; }
.btn--icon-only.btn--sm { width: 4.0rem; }
.btn--icon-only.btn--md { width: 4.8rem; }
.btn--icon-only.btn--lg { width: 5.6rem; }
.btn--icon-only.btn--xl { width: 6.4rem; }

/* ===== ESTRUCTURA INTERNA ===== */

/* Contenido principal */
.btn__content {
  display: flex;
  align-items: center;
  justify-content: center;
  transition: opacity var(--animation-fast) var(--easing-natural);
}

/* Iconos */
.btn__icon {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
  transition: transform var(--animation-fast) var(--easing-natural);
}

.btn__icon--left {
  margin-right: 0.8rem;
}

.btn__icon--right {
  margin-left: 0.8rem;
}

.btn__icon--only {
  margin: 0;
}

/* Hover en iconos */
.btn:hover:not(:disabled) .btn__icon {
  transform: scale(1.05);
}

/* ===== SPINNER DE LOADING ===== */
.btn__spinner {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  display: flex;
  align-items: center;
  justify-content: center;
}

.btn__spinner-svg {
  width: 1.6rem;
  height: 1.6rem;
  animation: spin 1s linear infinite;
  fill: none;
  stroke: currentColor;
  stroke-width: 2;
  stroke-linecap: round;
  stroke-linejoin: round;
}

.btn__spinner-circle {
  opacity: 0.25;
}

.btn__spinner-circle {
  opacity: 0.75;
  stroke-dasharray: 31.42; /* 2π * 5 (radius 5) */
  stroke-dashoffset: 31.42;
  animation: spin-dash 1.5s ease-in-out infinite;
}

@keyframes spin {
  to {
    transform: rotate(360deg);
  }
}

@keyframes spin-dash {
  0% {
    stroke-dasharray: 1, 200;
    stroke-dashoffset: 0;
  }
  50% {
    stroke-dasharray: 90, 200;
    stroke-dashoffset: -35px;
  }
  100% {
    stroke-dasharray: 90, 200;
    stroke-dashoffset: -125px;
  }
}

/* ===== ACCESIBILIDAD ===== */

/* Respeta prefers-reduced-motion */
@media (prefers-reduced-motion: reduce) {
  .btn,
  .btn *,
  .btn::before,
  .btn::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    transform: none !important;
  }
  
  .btn:hover:not(:disabled) {
    transform: none !important;
  }
}

/* High contrast mode */
@media (prefers-contrast: high) {
  .btn {
    border-width: 2px;
    border-style: solid;
  }
  
  .btn:focus {
    outline: 3px solid;
    outline-offset: 2px;
  }
}

/* ===== RESPONSIVE ADAPTATIONS ===== */

/* Touch devices - targets más grandes */
@media (pointer: coarse) {
  .btn--xs {
    height: 4.4rem;
    min-width: 7.0rem;
  }
  
  .btn--sm {
    height: 4.8rem;
    min-width: 8.6rem;
  }
}

/* Print styles */
@media print {
  .btn {
    background: white !important;
    color: black !important;
    border: 1px solid black !important;
    box-shadow: none !important;
    transform: none !important;
  }
}

/* ===== DEBUG UTILITIES (Solo desarrollo) ===== */
.btn[data-debug="true"] {
  position: relative;
}

.btn[data-debug="true"]::after {
  content: attr(data-size) ' ' attr(data-variant);
  position: absolute;
  top: -2rem;
  left: 0;
  font-size: 1rem;
  color: red;
  background: yellow;
  padding: 0.2rem 0.4rem;
  border-radius: 0.2rem;
  font-family: monospace;
  z-index: 9999;
}